<div class="project-form-container">
  <h3>{{ isEditing() ? "Edytuj Projekt" : "Dodaj Nowy Projekt" }}</h3>
  <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
    <app-input-field
      label="Nazwa Projektu"
      type="text"
      id="projectName"
      placeholder="Wprowadź nazwę projektu"
      formControlName="name"
    >
      <app-error-message
        [control]="projectForm.get('name')"
      ></app-error-message>
    </app-input-field>

    <div class="form-group">
      <label for="description">Opis Projektu</label>
      <textarea
        id="description"
        rows="4"
        formControlName="description"
        [class.is-invalid]="
          projectForm.get('description')?.invalid &&
          (projectForm.get('description')?.dirty ||
            projectForm.get('description')?.touched)
        "
      ></textarea>
      <app-error-message
        [control]="projectForm.get('description')"
      ></app-error-message>
    </div>

    <div class="form-group" *ngIf="isEditing()">
      <label for="status">Status</label>
      <select id="status" formControlName="status">
        <option value="active">Aktywny</option>
        <option value="completed">Ukończony</option>
        <option value="on_hold">Wstrzymany</option>
      </select>
      <app-error-message
        [control]="projectForm.get('status')"
      ></app-error-message>
    </div>

    <div class="form-actions">
      <button
        type="submit"
        class="btn-primary"
        [disabled]="projectForm.invalid || isLoading"
      >
        {{
          isLoading
            ? "Zapisywanie..."
            : isEditing()
            ? "Zapisz Zmiany"
            : "Dodaj Projekt"
        }}
      </button>
      <button type="button" class="btn-secondary" (click)="cancel.emit()">
        Anuluj
      </button>
    </div>
    <div *ngIf="formError" class="form-error">{{ formError }}</div>
  </form>
</div>
